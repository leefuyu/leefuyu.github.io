<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>小程序常用API</title>
      <link href="/blog/done/"/>
      <url>/blog/done/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="小程序-API：介绍"><a href="#小程序-API：介绍" class="headerlink" title="小程序 API：介绍"></a>小程序 API：介绍</h2><blockquote><p> 了解小程序 API 的功能和形式</p></blockquote><p>API 文档地址：<a href="https://developers.weixin.qq.com/miniprogram/dev/api/">https://developers.weixin.qq.com/miniprogram/dev/api/</a></p><p><strong>概念介绍</strong></p><p>小程序 API 提供了很多功能，如：路由导航、显示弹框等、网络请求、文件操作、设备信息、地理定位、本地存储等等。<br>小程序 API 都放在全局对象 <code>wx</code> 中，并分同步和异步两种：</p><ol><li>方法名以 <code>Sync</code> 结尾的是同步 API</li><li>其他均为异步 API</li></ol><h2 id="31-小程序-API：网络相关"><a href="#31-小程序-API：网络相关" class="headerlink" title="31-小程序 API：网络相关"></a>31-小程序 API：网络相关</h2><blockquote><p>了解发起网络请求的 API</p></blockquote><p><strong>概念介绍</strong></p><ol><li>wx.request 发起网络请求</li></ol><p>【注意】</p><ul><li><p>在调用一个域名上的接口时，要先在<a href="https://mp.weixin.qq.com/wxamp/devprofile/get_profile?token=808612705&amp;lang=zh_CN">小程序管理后台</a>中<br><strong>配置域名白名单</strong>，即允许小程序调用该域名下的接口, 然后<br><strong>关闭项目, 重新启动</strong></p></li><li><p>在本地开发时，也可在开发者工具中设置不检查域名(临时)</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">hot</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">getHotMovies</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;https://wx.maoyan.com/mmdb/movie/v2/list/hot.json&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">limit</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="attr">offset</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">ct</span>: <span class="string">&#x27;上海&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 成功的回调(箭头函数解决this问题)</span></span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">          <span class="attr">hot</span>: res.data.data.hot</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;请求结束了&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;button bind:tap=<span class="string">&quot;getHotMovies&quot;</span>&gt;获取热门电影&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;hot&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span>&#123;&#123;item.nm&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="32-小程序-API：界面相关"><a href="#32-小程序-API：界面相关" class="headerlink" title="32-小程序 API：界面相关"></a>32-小程序 API：界面相关</h2><blockquote><p>了解界面弹窗相关的API</p></blockquote><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/">https://developers.weixin.qq.com/miniprogram/dev/api/</a></p><p><strong>概念介绍</strong></p><ol><li>wx.showLoading / wx.hideLoading：显示/隐藏加载框</li><li>wx.showModal：显示确认框</li><li>wx.showToast：显示提示框</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">wx.showLoading(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;正在加载中...&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">wx.hideLoading()</span><br><span class="line"></span><br><span class="line">wx.showModal(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;弹出框标题&#x27;</span>,</span><br><span class="line">  <span class="attr">content</span>: <span class="string">&#x27;正文&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">wx.showToast(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;这是一条提示&#x27;</span>,</span><br><span class="line">  <span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">3000</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="33-小程序-API：媒体相关"><a href="#33-小程序-API：媒体相关" class="headerlink" title="33-小程序 API：媒体相关"></a>33-小程序 API：媒体相关</h2><blockquote><p>了解图片选择和图片展示相关的API</p></blockquote><p><strong>概念介绍</strong></p><ol><li>wx.chooseImage：从手机相册选择照片，或使用手机相机拍照</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">chooseImage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    wx.chooseImage(&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">sizeType</span>: [<span class="string">&#x27;compressed&#x27;</span>, <span class="string">&#x27;original&#x27;</span>],</span><br><span class="line">      <span class="attr">sourceType</span>: [<span class="string">&#x27;album&#x27;</span>, <span class="string">&#x27;camera&#x27;</span>],</span><br><span class="line"></span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">          <span class="attr">path</span>: res.tempFilePaths[<span class="number">0</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;操作结束!&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;button bind:tap=<span class="string">&quot;chooseImage&quot;</span>&gt;选择图片&lt;/button&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;path&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>形成小程序基本认知;  掌握基本语法</p><h2 id="01-小程序api预览图片"><a href="#01-小程序api预览图片" class="headerlink" title="01-小程序api预览图片"></a>01-小程序api预览图片</h2><ul><li>wx.previewImage：图片预览展示（只能预览网络图片，不能是本地图片）</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button bind:tap=<span class="string">&quot;previewImage&quot;</span>&gt;预览图片&lt;/button&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="function"><span class="title">previewImage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    wx.previewImage(&#123;</span><br><span class="line">      <span class="attr">urls</span>: [</span><br><span class="line">        <span class="string">&#x27;https://img1.baidu.com/it/u=2371210194,1495988968&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=500&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://img0.baidu.com/it/u=2705683877,4119372584&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=500&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://img2.baidu.com/it/u=4134461600,792106990&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=500&#x27;</span></span><br><span class="line">      ],</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="02-小程序api上传文件"><a href="#02-小程序api上传文件" class="headerlink" title="02-小程序api上传文件"></a>02-小程序api上传文件</h2><ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/api/network/upload/wx.uploadFile.html">wx.uploadFile</a><ul><li>发起一个post请求</li></ul></li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button bind:tap=<span class="string">&quot;uploadImage&quot;</span>&gt;上传图片&lt;/button&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="function"><span class="title">uploadImage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    wx.chooseImage(&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">sizeType</span>: [<span class="string">&#x27;compressed&#x27;</span>, <span class="string">&#x27;original&#x27;</span>],</span><br><span class="line">      <span class="attr">sourceType</span>: [<span class="string">&#x27;album&#x27;</span>, <span class="string">&#x27;camera&#x27;</span>],</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="keyword">const</span> path = res.tempFilePaths[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        wx.uploadFile(&#123;</span><br><span class="line">          <span class="attr">filePath</span>: path,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;file&#x27;</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/api/upload&#x27;</span>,</span><br><span class="line">          <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res);</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>注意: </p><ol><li>可以<strong>临时启用</strong> 不校验合法域名</li><li>上传到的本地服务器代码在<code>资源/myserver3</code>中, 安装依赖, <code>node server.js</code></li><li>上传成功的图片在upload文件夹中</li></ol><h2 id="03-小程序-API：路由相关"><a href="#03-小程序-API：路由相关" class="headerlink" title="03-小程序 API：路由相关"></a>03-小程序 API：路由相关</h2><blockquote><p>了解编程式路由相关的API</p></blockquote><p><strong>概念介绍</strong></p><ol><li>wx.navigateTo：跳转到应用内的某个页面，不能跳到 tabbar 页面 （push）</li><li><p>wx.redirectTo：重定向的方式跳转到应用内的某个页面，不能跳到 tabbar 页面（replace）<br>A B C<br>A =&gt; C</p></li><li><p>wx.switchTab：跳转到 tabBar 页面(<em>自己测试一下</em>)</p></li></ol><p><code>test-link-a.wxml</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;A页面&lt;/view&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">&quot;goToPage&quot;</span>&gt;</span>跳转B<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><code>test-link-a.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="function"><span class="title">goToPage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/test-link-b/test-link-b&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>test-link-b.wxml</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;B页面&lt;/view&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">&quot;goToPage&quot;</span>&gt;</span>跳转C<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><code>test-link-b.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="function"><span class="title">goToPage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    wx.redirectTo(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/test-link-c/test-link-c&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>test-link-c.wxml</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;C页面&lt;/view&gt;</span><br></pre></td></tr></table></figure><h2 id="04-小程序-API：缓存相关"><a href="#04-小程序-API：缓存相关" class="headerlink" title="04-小程序 API：缓存相关"></a>04-小程序 API：缓存相关</h2><blockquote><p>了解本地缓存相关的API<br>localStorage<br><strong>概念介绍</strong></p></blockquote><p>缓存 API 提供了同步和异步版本。在实际开发中的使用原则是：</p><ul><li>如果一次缓存的数据量较大时，推荐使用异步 API</li><li>否则推荐使用同步 API</li></ul><ol><li>setStorage / setStorageSync：设置一个缓存数据</li><li>getStorage / getStorageSync：获取一个缓存数据</li><li>removeStorage / removeStorageSync：删除一个缓存数据</li><li>clearStorage / clearStorageSync：清空所有缓存数据</li><li>getStorageInfo / getStorageInfoSync：获取缓存状态信息</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button bind:tap=<span class="string">&quot;setStorage&quot;</span>&gt;设置&lt;/button&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">&quot;getStorage&quot;</span>&gt;</span>获取<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">&quot;removeStorage&quot;</span>&gt;</span>移除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">&quot;clearStorage&quot;</span>&gt;</span>清空<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">&quot;getStorageInfo&quot;</span>&gt;</span>获取存储信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="function"><span class="title">setStorage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// wx.setStorageSync(&#x27;token&#x27;, &#x27;adadfasdfasdfgfdsgdfsg&#x27;)</span></span><br><span class="line"></span><br><span class="line">    wx.setStorage(&#123;</span><br><span class="line">      <span class="attr">key</span>: <span class="string">&#x27;token&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: <span class="string">&#x27;xxxxxxxxxxxxxxxxxxxx&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">getStorage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(wx.getStorageSync(<span class="string">&#x27;token&#x27;</span>));</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">removeStorage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    wx.removeStorageSync(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">clearStorage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    wx.clearStorageSync()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">getStorageInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(wx.getStorageInfoSync());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
